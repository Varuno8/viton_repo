datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String     @id @default(cuid())
  clerkUserId  String     @unique
  email        String
  name         String?
  createdAt    DateTime   @default(now())
  tryOnJobs    TryOnJob[]
}

model Product {
  id          String   @id @default(cuid())
  handle      String   @unique
  title       String
  shortDesc   String?
  description String?
  brand       String?
  category    String?
  pattern     String?
  color       String?
  tags        String?
  skus        String?
  price       Float?
  priceMin    Float?
  priceMax    Float?
  imageUrls   String
  productUrl  String?
  createdAt   DateTime  @default(now())
  tryOnJobs   TryOnJob[]
}

model TryOnJob {
  id             String   @id @default(cuid())
  userId         String
  productId      String
  userPhotoUrls  String
  status         String   @default("PENDING")
  resultImageUrl String?
  error          String?
  externalJobId  String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  user    User    @relation(fields: [userId], references: [id])
  product Product @relation(fields: [productId], references: [id])
}